{% extends 'base.html' %}

{% block content %}
<a href="/board/{{topic.board_id}}"><b>{{topic.board_title}}</b></a> >>
<h2>{{topic.title}}</h2>
{% if g.user and (g.user.id == topic.user_id or g.user.is_admin) %}
<a href="{{url_for('edit_topic',topic_id=topic.id)}}">Muokkaa otsikkoa</a>
<a href="{{url_for('remove_topic',topic_id=topic.id)}}">Poista ketju</a>
{% endif %}
{% for post in posts %}
<article>
    <p>{{post.content}}</p>
    {% if g.user and (g.user.id == post.user_id or g.user.is_admin) %}
    <a href="{{url_for('edit_post', post_id = post.id)}}">Muokkaa viestiä</a>
    {% endif %}
</article>
{% endfor %}
{% if session.user_id %}
<form action="/topic/{{topic.id}}" method="post">
    <input type="hidden" name="csrf_token" value="{{session.csrf_token}}">
    <input type="hidden" name="topic_id" id="topic_id" value="{{topic_id}}">
    <p>
        <label for="content">Viesti:</label>
        <input type="text" name="content">
    </p>
    <input type="submit" value="Lähetä">
</form>
{% endif %}
{% endblock %}